/* 
** by:David Yang
** https://github.com/yangyunhe369/jQuery-Apple-Slider
**
** jquery-apple-slider.js v1.3
** Date: 2017-12-15
*/
+function(a){a.fn.AppleSlider=function(b){var c=a.extend({imgItem:".gallery_item",imgNum:3,autoPlay:!0,autoTime:5e3},b),d={win_w:a(window).width(),slide_state:0,_this:a(this),_imgNum:c.imgNum,_imgItem:c.imgItem,_index:0,_autoPlay:c.autoPlay,_autoTime:c.autoTime,sildeTimer:null,stateTimer:null,init:function(){var d,e,f,g,b=this,c=b._this.find(b._imgItem);for(d=0;d<c.length;d++)c.eq(d).attr("data-idx",d);for(d=0;d<b._imgNum;d++)b._this.find(b._imgItem+"[data-idx="+d+"]").css({transform:"translate3d("+b.win_w*d+"px,0,0)",transition:"all 0s ease-in-out"}),d==this._imgNum-1&&b._this.find(b._imgItem+"[data-idx="+d+"]").css({transform:"translate3d(-"+b.win_w+"px,0,0)",transition:"all 0s ease-in-out"});for(e="",f="",g="",d=0;d<b._imgNum;d++)b._autoPlay&&0==d?e='<li data-target="'+d+'" class="nav_slide nav_slide_'+d+' active autoplay"><div class="slide_btn"></div></li>':0==d?e='<li data-target="'+d+'" class="nav_slide nav_slide_'+d+' active"><div class="slide_btn"></div></li>':e+='<li data-target="'+d+'" class="nav_slide nav_slide_'+d+'"><div class="slide_btn"></div></li>';f='<ul class="nav">'+e+"</ul>",b._this.append(f),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?b._this.swipe({swipe:function(a,c){b.cleanAutoMove(),"left"==c?0==b.slide_state&&b.moveTo("right",1):"right"==c&&0==b.slide_state&&b.moveTo("left",1)}}):(g='<div class="nav_btn left"><div class="btn_left"></div></div><div class="nav_btn right"><div class="btn_right"></div></div>',b._this.append(g),b._this.find(".nav_btn.right").on("click",function(){b.cleanAutoMove(),0==b.slide_state&&b.moveTo("right",1)}),b._this.find(".nav_btn.left").on("click",function(){b.cleanAutoMove(),0==b.slide_state&&b.moveTo("left",1)})),b._this.find(".nav li").on("click",function(){if(b.cleanAutoMove(),1!=b.slide_state){var c=b.changeIndex(b._index),d=a(this).index();if(a(this).addClass("active").siblings().removeClass("active"),d>c)b.moveTo("right",d-c);else if(c>d)b.moveTo("left",c-d);else if(d==c)return;clearTimeout(b.stateTimer),b.stateTimer=setTimeout(function(){b.slide_state=0},700)}}),b._autoPlay&&(b.autoMove(),b.setPageVisibilityFn())},moveTo:function(a,b){var d,e,f,g,h,i,c=this;for(c.slide_state=1,"left"==a?c._index-=b:"right"==a&&(c._index+=b),d=c._index,e=c.changeIndex(c._index),f=-c.win_w*d,g=[],h=[],i=0;i<c._imgNum;i++)0==i?(g[i]=Math.floor((d+1)/c._imgNum),h[i]=c.win_w*c._imgNum*g[i]):i==c._imgNum-1?(g[i]=Math.floor((d-1)/c._imgNum)+1,h[i]=-c.win_w+g[i]*c._imgNum*c.win_w):(g[i]=Math.floor(d/c._imgNum),h[i]=c.win_w*i+g[i]*c._imgNum*c.win_w);for(c._this.find(".gallery_slide_wrapper").css({transform:"translate3d("+f+"px,0,0)",transition:"all .7s ease-in-out"}),i=0;i<c._imgNum;i++)c._this.find(c._imgItem+'[data-idx="'+i+'"]').css({transform:"translate3d("+h[i]+"px,0,0)",transition:"all .7s ease-in-out"});if(0==e&&"right"==a&&1==b||e==c._imgNum-1&&"left"==a&&1==b)for(i=0;i<c._imgNum;i++)0!=i&&i!=c._imgNum-1&&c._this.find(c._imgItem+'[data-idx="'+i+'"]').css({transition:"all 0s ease-in-out"});else 0==e&&"left"==a&&1==b||1==e&&"right"==a&&1==b?c._this.find(c._imgItem+'[data-idx="'+(c._imgNum-1)+'"]').css({transition:"all 0s ease-in-out"}):e==c._imgNum-2&&"left"==a&&1==b||e==c._imgNum-1&&"right"==a&&1==b?c._this.find(c._imgItem+'[data-idx="0"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"):0==e&&"left"==a&&b>1&&b<c._imgNum-1||0!=e&&e!=c._imgNum-1&&"right"==a&&b>1&&b<c._imgNum-1?c._this.find(c._imgItem+'[data-idx="'+(c._imgNum-1)+'"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"):e==c._imgNum-1&&"right"==a&&b>1&&b<c._imgNum-1||0!=e&&e!=c._imgNum-1&&"left"==a&&b>1&&b<c._imgNum-1?c._this.find(c._imgItem+'[data-idx="0"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"):e==c._imgNum-1&&"right"==a&&b==c._imgNum-1?(c._this.find(c._imgItem+'[data-idx="'+(c._imgNum-1)+'"]').css({transition:"all 0s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="0"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex")):0==e&&"left"==a&&b==c._imgNum-1&&(c._this.find(c._imgItem+'[data-idx="0"]').css({transition:"all 0s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="'+(c._imgNum-1)+'"]').css({transition:"all 0s ease-in-out .7s"}).addClass("zIndex").siblings().removeClass("zIndex"));if(c._this.find(c._imgItem+'[data-idx="'+e+'"]').find(".gallery_item_content").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="'+e+'"]').find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),e==c._imgNum-1)for(i=0;i<c._imgNum;i++)i>1&&(c._this.find(c._imgItem+'[data-idx="'+(e-i)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.2*c.win_w+"px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="'+(e-i)+'"]').find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}));else for(i=0;i<c._imgNum;i++)i<c._imgNum-1&&i>0&&(c._this.find(c._imgItem+'[data-idx="'+(e+i)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.2*c.win_w+"px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="'+(e+i)+'"]').find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all .7s ease-in-out"}));e>0?(c._this.find(c._imgItem+'[data-idx="'+(e-1)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.95*c.win_w+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="'+(e-1)+'"]').find(".gallery_image").css({transform:"translate3d("+.9*c.win_w+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"})):(c._this.find(c._imgItem+'[data-idx="'+(e+c._imgNum-1)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.95*c.win_w+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"}),c._this.find(c._imgItem+'[data-idx="'+(e+c._imgNum-1)+'"]').find(".gallery_image").css({transform:"translate3d("+.9*c.win_w+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all .7s ease-in-out"})),("right"==a&&b>1&&b<c._imgNum-1||"left"==a&&b>1&&b<c._imgNum-1)&&(c._this.find(c._imgItem).find(".gallery_item_content").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all 0s ease-in-out"}),c._this.find(c._imgItem).find(".gallery_image").css({transform:"translate3d(0px, 0px, 0px) scale3d(1, 1, 1)",transition:"all 0s ease-in-out"}),e>0?c._this.find(c._imgItem+'[data-idx="'+(e-1)+'"]').find(".gallery_item_content").css({transform:"translate3d("+.95*c.win_w+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all 0s ease-in-out .7s"}):c._this.find(c._imgItem+'[data-idx="'+(e+c._imgNum-1)+'"]').find(".gallery_image").css({transform:"translate3d("+.9*c.win_w+"px, 0px, 0px) scale3d(.9, .9, 1)",transition:"all 0s ease-in-out .7s"})),c._this.find(".nav li").eq(e).addClass("active").siblings().removeClass("active"),c._autoPlay&&c._this.find(".nav li").eq(e).addClass("autoplay").siblings().removeClass("autoplay"),clearTimeout(c.stateTimer),c.stateTimer=setTimeout(function(){c.slide_state=0},700)},setPageVisibilityFn:function(){var a=this,b="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,c=b.replace(/hidden/i,"visibilitychange");document.addEventListener(c,function(){var c=a.changeIndex(a._index);document[b]?(a.cleanAutoMove(),a._this.find(".nav_slide").eq(c).removeClass("active")):setTimeout(function(){a.autoMove(),a._this.find(".nav_slide").eq(c).addClass("autoplay")},200)})},changeIndex:function(a){var b=this,a=a%b._imgNum;return 0>a?a=b._imgNum+a:0==a&&(a=0),a},autoMove:function(){var a=this;a._autoPlay=!0,a.sildeTimer=setInterval(function(){a.moveTo("right",1)},c.autoTime)},cleanAutoMove:function(){var a=this;return 0==a._autoPlay?!1:(a._autoPlay=!1,a._this.find(".nav li").removeClass("autoplay"),clearInterval(a.sildeTimer),void 0)}};d.init()}}(jQuery);